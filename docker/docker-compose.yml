version: "3.8"
name: "open-forum"
services:
  # Open forum services
  config-server:
    extends:
      file: open-forum-services-config.yml
      service: micro_forum_config-server
  discovery-server:
    extends:
      file: open-forum-services-config.yml
      service: micro_forum_discovery-server
  posts:
    extends:
      file: open-forum-services-config.yml
      service: micro_forum_posts
  notifications:
    extends:
      file: open-forum-services-config.yml
      service: micro_forum_notifications
  gateway:
    extends:
      file: open-forum-services-config.yml
      service: micro_forum_gateway

  # Storages
  post-service-pg-db:
    extends:
      file: database-configs.yml
      service: storage-post-service-pg-db
  review-service-pg-db:
    extends:
      file: database-configs.yml
      service: storage-review-service-pg-db
  pg-admin-postgres-ui:
    extends:
      file: database-configs.yml
      service: storage-pg-admin-postgres-ui

  # Observability
  elasticsearch_for_logs:
    extends:
      file: observability-and-related-configs.yml
      service: observability_elasticsearch_for_logs
  kibana:
    extends:
      file: observability-and-related-configs.yml
      service: observability_kibana
  logstash:
    extends:
      file: observability-and-related-configs.yml
      service: observability_logstash
  filebeat:
    extends:
      file: observability-and-related-configs.yml
      service: observability_filebeat
  prometheus:
    extends:
      file: observability-and-related-configs.yml
      service: observability_prometheus
  grafana:
    extends:
      file: observability-and-related-configs.yml
      service: observability_grafana

  # Other external services
  rabbitmq:
    extends:
      file: other-services-config.yml
      service: other_external_rabbitmq
  keycloak:
    extends:
      file: other-services-config.yml
      service: other_external_keycloak
  redis:
    extends:
      file: other-services-config.yml
      service: other_redis

volumes:
  elasticsearch_data:
    driver: local
  post-service-pg-db_local_data:
  review-service-pg-db_local_data:
  pgadmin-data:

