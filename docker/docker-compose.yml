version: "3.8"
name: "open-forum-services"
services:
  # Open forum cloud
  open-forum-cloud-config-server:
    extends:
      file: open-forum-services-config.yml
      service: open_forum_config-server
  open-forum-cloud-discovery-server:
    extends:
      file: open-forum-services-config.yml
      service: open_forum_discovery-server
  open-forum-cloud-gateway:
    extends:
      file: open-forum-services-config.yml
      service: open_forum_gateway

  # Open forum core
  open-forum-core-posts:
    extends:
      file: open-forum-services-config.yml
      service: open_forum_posts
  open-forum-core-notifications:
    extends:
      file: open-forum-services-config.yml
      service: open_forum_notifications

  # Storages
  post-service-pg-db:
    extends:
      file: storage-configs.yml
      service: storage-post-service-pg-db
  review-service-pg-db:
    extends:
      file: storage-configs.yml
      service: storage-review-service-pg-db
  redis:
    extends:
      file: storage-configs.yml
      service: storage-redis

  # Observability
  elasticsearch_for_logs:
    extends:
      file: observability-and-related-configs.yml
      service: observability_elasticsearch_for_logs
  kibana:
    extends:
      file: observability-and-related-configs.yml
      service: observability_kibana
  logstash:
    extends:
      file: observability-and-related-configs.yml
      service: observability_logstash
  filebeat:
    extends:
      file: observability-and-related-configs.yml
      service: observability_filebeat
  prometheus:
    extends:
      file: observability-and-related-configs.yml
      service: observability_prometheus
  grafana:
    extends:
      file: observability-and-related-configs.yml
      service: observability_grafana

  # Events related services
  zookeeper:
    extends:
      file: kafka-and-related-services-config.yml
      service: zookeeper
  kafka1:
    extends:
      file: kafka-and-related-services-config.yml
      service: kafka1
  kafka2:
    extends:
      file: kafka-and-related-services-config.yml
      service: kafka2
  kafka3:
    extends:
      file: kafka-and-related-services-config.yml
      service: kafka3
  schema-registry:
    extends:
      file: kafka-and-related-services-config.yml
      service: schema-registry
  postgresql:
    extends:
      file: kafka-and-related-services-config.yml
      service: postgresql
  conduktor-console:
    extends:
      file: kafka-and-related-services-config.yml
      service: conduktor-console

  # Other external services
  other_external_rabbitmq:
    extends:
      file: other-services-config.yml
      service: other_external_rabbitmq
  other_external_keycloak:
    extends:
      file: other-services-config.yml
      service: other_external_keycloak

volumes:
  elasticsearch_data:
    driver: local
  post-service-pg-db_local_data:
  review-service-pg-db_local_data:
  pgadmin-data:

